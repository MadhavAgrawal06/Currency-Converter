   const base_url = "https://open.er-api.com/v6/latest";


   const list=document.querySelectorAll("select");
   const btn=document.querySelector("#btn");
   const message=document.querySelector(".msg");
   const form=document.querySelector("form")

   const fromCurr=document.querySelector(".from select");
   const toCurr=document.querySelector(".to select");

   const clickSound=new Audio("sounds/clickSound.mp3");
   const changeSound=new Audio("sounds/change.mp3");

   for(let curren of list){   

      let firstOption=document.createElement("option");
      firstOption.innerText="Select";
      firstOption.value="";
      firstOption.selected=true;
      firstOption.disabled=true;
      curren.append(firstOption);

      for(let currCode in countryList){
         let options=document.createElement("option");
         options.innerText=currCode;
         options.value=currCode;
         curren.append(options);
      }
      curren.addEventListener("change",(e)=>{
         updateFlag(e.target);
      });
   }

  let noFlag=document.querySelectorAll("img");
  noFlag.forEach(img => {
      img.style.display = "none";
  });

   const updateFlag=(element)=>{
      changeSound.play();
      let currCode=element.value; 
      let countryCode=countryList[currCode];
      let newSrc=`https://flagsapi.com/${countryCode}/flat/64.png`;

      let img=element.parentElement.querySelector("img");
      img.style.removeProperty("display");
      img.src = newSrc;
   }
   
   form.addEventListener("submit",async(e)=>{
      e.preventDefault();

      let amount=document.querySelector(".amount input");
      if(amount.value ===""|| amount.value <1 || isNaN(Number(amount.value))){
         message.innerText="Invalid Amount";
         return;
      }
      if(fromCurr.value === "" || toCurr.value === "") {
         message.innerText = "Please select both currencies.";
         return;
      }
      
      clickSound.play();

   try{
      const URL=`${base_url}/${fromCurr.value}`;
      let response=await fetch(URL);
      let data=await response.json();

      let rate = data.rates[toCurr.value];
      if (!rate) {
        message.innerText = "Currency not supported.";
        return;
      }

      let finalAmount=(amount.value)*rate;
      message.innerText=`${amount.value} ${fromCurr.value} = ${finalAmount.toFixed(4)} ${toCurr.value}`
   }
   catch(e){
      message.innerText = "Failed. Please Try again.";
   }  
   });






































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































